# ScanPang 앱 시연영상 기반 버그 수정 요청

아래는 AR 건물 인식 앱(ScanPang) 시연영상에서 발견된 문제점들이다. 우선순위대로 수정해라.

---

## 🔴 P0 - 즉시 수정 (치명적)

### 1. API 에러 토스트 사용자 노출 차단
- **현상:** 하단에 `[API] 건물 프로필 조회 실패 (bld_001): AxiosError...`, `[API] 주변 건물 조회 실패: AxiosError: Network...`, `[API] 스캔 로그 전송 실패: AxiosError: Network...` 같은 개발자용 에러 토스트가 그대로 사용자에게 노출됨
- **에러 카운트가 4 → 2 → 6 → 12로 누적되며 빨간 뱃지로 표시됨**
- **수정 방향:**
  - 프로덕션 빌드에서는 개발자용 에러 토스트를 완전히 숨겨라
  - 네트워크 에러 시 사용자 친화적 메시지로 변환해라 (예: "네트워크 연결을 확인해주세요")
  - 에러 카운트 뱃지 누적 표시 제거하거나, 디버그 모드에서만 표시되도록 분기해라
  - `console.error`로만 로깅하고, UI 토스트는 사용자용 메시지만 표시해라

### 2. API 에러 재시도 로직 추가
- **현상:** 네트워크 에러 발생 시 재시도 없이 실패 토스트만 누적됨
- **수정 방향:**
  - 건물 프로필 조회, 주변 건물 조회, 스캔 로그 전송 API에 retry 로직 추가 (최대 3회, exponential backoff)
  - 스캔 로그 전송은 실패 시 로컬 큐에 저장했다가 네트워크 복구 시 재전송해라

---

## 🟡 P1 - UI/UX 개선

### 3. "건물을 향해 카메라를 비추세요" 가이드 텍스트 조건부 숨김
- **현상:** 이미 3개 건물이 감지된 상태에서도 이 안내 문구가 계속 표시됨
- **수정 방향:**
  - 건물이 1개 이상 감지되면 이 가이드 텍스트를 숨기거나, "N개 건물이 감지되었습니다" 등으로 전환해라

### 4. 층별 안내 팝업 하단 로딩 스피너 처리
- **현상:** 코엑스몰 층별 보기 팝업에서 데이터는 이미 다 표시된 상태인데 하단에 로딩 스피너가 계속 돌아감
- **수정 방향:**
  - 층별 데이터 로딩 완료 후 스피너를 즉시 제거해라
  - 추가 데이터를 불러오는 거라면 어떤 데이터를 로딩 중인지 표시해라

### 5. 층별 안내 팝업이 AR 뷰를 과도하게 가림
- **현상:** 팝업이 화면 2/3 이상을 덮어서 AR 뷰가 좌측 슬릿으로만 보임
- **수정 방향:**
  - 바텀시트 형태로 변경하여 half-expand 상태를 기본으로 하고, 위로 드래그하면 full-expand 되도록 해라
  - 또는 팝업 최대 높이를 화면의 50% 이하로 제한해라

### 6. AR 태그 라벨 겹침 방지
- **현상:** 강남 파이낸스센터, 삼성타운, 코엑스몰 라벨이 서로 겹치는 순간이 있음
- **수정 방향:**
  - 라벨 간 collision detection을 적용하여 겹칠 경우 위치를 자동 조정해라
  - 가까이 있는 라벨은 오프셋을 주거나, 줌 레벨에 따라 일부 라벨을 축소/숨김 처리해라

### 7. 선택된 건물의 AR 라벨 시각적 강조
- **현상:** 하단 탭에서 건물 선택 시 AR 뷰의 해당 건물 라벨에 시각적 강조가 약함
- **수정 방향:**
  - 선택된 건물의 AR 라벨을 하이라이트 색상(파란색/초록색 등)으로 변경하고 크기를 키워라
  - 비선택 건물 라벨은 반투명 처리해라

---

## 🟢 P2 - 데이터/품질

### 8. 에러 메시지 사용자 친화적 변환
- **현상:** `AxiosError: Network...` 같은 기술 스택 에러가 그대로 노출됨
- **수정 방향:**
  - 에러 메시지 매핑 유틸 함수를 만들어라
  - `AxiosError: Network` → "인터넷 연결을 확인해주세요"
  - `AxiosError: timeout` → "서버 응답이 느립니다. 잠시 후 다시 시도해주세요"
  - `AxiosError: 404` → "건물 정보를 찾을 수 없습니다"
  - `AxiosError: 500` → "서버 오류가 발생했습니다"

### 9. 삼성타운 주소 데이터 검증
- **현상:** 삼성타운 주소가 "서울특별시 서초구 서초대로74길 11"로 표시됨. 실제 위치와 맞는지 확인 필요
- **수정 방향:**
  - 건물 DB의 주소 데이터를 실제 주소와 대조 검증해라
